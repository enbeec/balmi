<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>balmi say hello</title>
</head>
<body>
<div
  id="canvas"
  x-data="layout"
  :class="canvas"
  class="bg-slate-300"
  @panelfocus="focusPanel($event.detail)"
  x-effect="console.debug('layout change', { currentBreakpoint, bodyWidth, bodyHeight })"
>
  <div
    class="h-screen p-1 pb-6 md:p-6 md:pb-12 lg:p-12 lg:pb-18"
  >
    <div
      id="foreground"
      :class="foreground + ` ${currentBreakpoint}`"
      class="h-full bg-[cornflowerblue] relative"
    >
      <section
        id="chat-panel"
        :class="chatPanel + chatPanelPosition"
        x-data="balmi"
        class="relative overflow-y-auto border border-amber-200 bg-green-300 flex flex-col-reverse shadow-amber-950"
        @click.stop.prevent="$dispatch('panelfocus', 'chat')"
      >
        <input
          tabindex="0"
          class="mt-2 bg-green-100 slate-900 p-2 h-8"
          x-model="chatInput"
          x-ref="chatInputEl"
          @keydown.esc.prevent="clearCompletions()"
          @keydown.shift.esc="$event.target.blur()"
          @keydown.tab.prevent="queryCompletions()"
          @keydown.enter="completions.length ? commitCompletion(completionIndex) : submitChat()"
        />
        <div
          class="md:mt-2 px-2 bg-amber-100"
        >
          <template
            x-for="(comp, idx) in completions"
          >
                <span
                  class="mx-2"
                  :class="{ 'text-cyan-950 underline': completionIndex === idx }"
                  x-text="comp"
                  tabindex="0"
                ></span>
          </template>
        </div>
        <template x-for="row in rows">
          <div
            x-text="row.text"
            class="px-2"
            :class="row.type === 'chat' ? 'text-slate-900' : 'text-slate-700'"></div>
        </template>
      </section>
      <section
        id="flex-panel"
        :class="flexPanel + flexPanelPosition + ` ${currentBreakpoint}`"
        class="relative bg-purple-300 border border-amber-200 shadow-amber-950"
        @click.stop.prevent="$dispatch('panelfocus', 'flex')"
        x-data="{ set: new Set() }"
      >
        <template x-for="(icon, index) of ['award']">
          <div 
            class="flex-panel-child toggle" 
            :class="{ [currentBreakpoint]: true, active: set.has(index) }"
            @click.stop.prevent="set.has(index) ? set.delete(index) : set.add(index)"
          >
            <i 
              x-feather="icon"
              class="mx-auto mt-1"
            ></i>
          </div>
        </template>
      </section>
      <section
        id="ctrl-panel"
        :class="ctrlPanel + ctrlPanelPosition"
        class="relative bg-red-300 border border-amber-200 shadow-amber-950"
        @click.stop.prevent="$dispatch('panelfocus', 'ctrl')"
      ></section>
    </div>
  </div>
</div>
<script defer type="module" src="/src/main.ts"></script>
</body>
</html>

<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <link rel="icon" type="image/svg+xml" href="/vite.svg" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>balmi say hello</title>
</head>
<body>
<div
  id="canvas"
  x-data="layout"
  :class="canvas"
  class="bg-slate-300"
  @panelfocus="focusPanel($event.detail)"
>
  <div
    class="h-screen p-1 pb-6 md:p-6 md:pb-12"
  >
    <div
      id="foreground"
      :class="foreground"
      class="h-full bg-[cornflowerblue] relative"
    >
      <div
        id="chat-panel"
        :class="chatPanel"
        x-data="balmi"
        class="overflow-y-auto border border-amber-200 bg-green-300 flex flex-col-reverse shadow shadow-amber-950"
      >
        <input
          tabindex="0"
          class="mt-2 bg-green-100 slate-900 p-2 h-8"
          x-model="chatInput"
          x-ref="chatInputEl"
          @keydown.esc.prevent="clearCompletions()"
          @keydown.shift.esc="$event.target.blur()"
          @keydown.tab.prevent="queryCompletions()"
          @keydown.enter="completions.length ? commitCompletion(completionIndex) : submitChat()"
        />
        <div
          class="md:mt-2 px-2 bg-amber-100"
        >
          <template
            x-for="(comp, idx) in completions"
          >
                <span
                  class="mx-2"
                  :class="{ 'text-cyan-950 underline': completionIndex === idx }"
                  x-text="comp"
                  tabindex="0"
                ></span>
          </template>
        </div>
        <template x-for="row in rows">
          <div
            x-text="row.text"
            class="px-2"
            :class="row.type === 'chat' ? 'text-slate-900' : 'text-slate-700'"></div>
        </template>
      </div>
      <div
        id="flex-panel"
        :class="flexPanel + flexPanelPosition"
        class="bg-purple-300 mt-12 border border-amber-200 shadow shadow-amber-950"
        @click.stop.prevent="$dispatch('panelfocus', 'flex')"
      ></div>
      <div
        id="ctrl-panel"
        :class="ctrlPanel + ctrlPanelPosition"
        class="bg-red-300 border border-amber-200 shadow shadow-amber-950"
        @click.stop.prevent="$dispatch('panelfocus', 'ctrl')"
      ></div>
    </div>
  </div>
</div>
<script defer type="module" src="/src/main.ts"></script>
</body>
</html>
